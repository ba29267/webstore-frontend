<div class="container">
  <h2>Products</h2>

  <!-- Debug: Remove this after fixing -->
  <div style="background: #f0f0f0; padding: 5px; margin: 5px 0; font-size: 12px;">
    Loading: {{ loading }} | Products: {{ products.length }} | Filtered: {{ filtered.length }}
  </div>

  <div class="filters">
    <input
      type="text"
      placeholder="Search..."
      [(ngModel)]="search"
      (input)="applyFilters()"
    />

    <select [(ngModel)]="category" (change)="applyFilters()">
      <option value="">All categories</option>
      <option *ngFor="let c of categories" [value]="c">
        {{ c }}
      </option>
    </select>
  </div>

  <!-- Loading state -->
  <p *ngIf="loading">Loading products...</p>

  <!-- Error state -->
  <p *ngIf="error" style="color: red;">Error: {{ error }}</p>

  <!-- Products grid - only show when NOT loading -->
  <div class="grid" *ngIf="!loading">
    <div *ngIf="filtered.length === 0 && !error">
      <p>No products found.</p>
    </div>
    
    <div class="product-card" *ngFor="let p of filtered">
      <h3>{{ p.name }}</h3>
      <p>{{ p.description }}</p>
      <p><b>{{ p.price }}$</b></p>
      <p *ngIf="p.Category" style="font-size: 12px; color: #666;">
        Category: {{ p.Category.name }}
      </p>
      <button>Add to Cart</button>
    </div>
  </div>
</div>